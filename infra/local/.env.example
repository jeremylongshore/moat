# Moat Local Development Environment Variables
# Copy this file to .env and edit as needed.
#   cp infra/local/.env.example infra/local/.env
#
# These values are safe defaults for local/docker-compose use only.
# Never commit a .env file with real secrets.

# ---------------------------------------------------------------------------
# Postgres
# ---------------------------------------------------------------------------
POSTGRES_DB=moat
POSTGRES_USER=moat
POSTGRES_PASSWORD=moat_dev

# Full async URL (used by FastAPI services)
DATABASE_URL=postgresql+asyncpg://moat:moat_dev@postgres:5432/moat

# Sync URL (used by Alembic migrations)
DATABASE_SYNC_URL=postgresql+psycopg2://moat:moat_dev@postgres:5432/moat

# ---------------------------------------------------------------------------
# Redis
# ---------------------------------------------------------------------------
REDIS_URL=redis://redis:6379/0

# ---------------------------------------------------------------------------
# Service URLs (internal docker-compose hostnames)
# ---------------------------------------------------------------------------
CONTROL_PLANE_URL=http://control-plane:8001
GATEWAY_URL=http://gateway:8002
TRUST_PLANE_URL=http://trust-plane:8003
MCP_SERVER_URL=http://mcp-server:8004

# ---------------------------------------------------------------------------
# Signing / Verification
# ---------------------------------------------------------------------------
# Secret used to sign verification receipts. Change in any real environment.
MOAT_SIGNING_SECRET=dev-signing-secret-change-me

# ---------------------------------------------------------------------------
# Auth (stub for local dev â€“ replace with real OIDC in production)
# ---------------------------------------------------------------------------
MOAT_AUTH_DISABLED=true
MOAT_JWT_SECRET=dev-jwt-secret-change-me
MOAT_JWT_ALGORITHM=HS256

# ---------------------------------------------------------------------------
# Rate Limiting
# ---------------------------------------------------------------------------
# Requests per minute per tenant
RATE_LIMIT_RPM=60

# ---------------------------------------------------------------------------
# Logging
# ---------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json

# ---------------------------------------------------------------------------
# Environment tag (local | dev | staging | prod)
# ---------------------------------------------------------------------------
MOAT_ENV=local
